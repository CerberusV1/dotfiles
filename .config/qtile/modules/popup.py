from libqtile import qtile
from libqtile.lazy import lazy
from helper.colors import wp_colors
from qtile_extras import widget
from qtile_extras.popup.toolkit import (
    PopupRelativeLayout,
    PopupGridLayout,
    PopupImage,
    PopupText,
    PopupWidget,
    PopupSlider
)
# import Path

def show_power_menu(qtile):
    layout = PopupRelativeLayout(
        qtile,
        width=70,
        height=250,
        opacity=0.7,
        border=wp_colors[3],
        border_width=3,
        background=wp_colors[0],
        initial_focus=None,
        controls=[
        PopupImage(
            filename="~/dotfiles/.config/qtile/images/reboot.png",
            pos_x=0.12,
            pos_y=0,
            width=0.8,
            height=0.3,
            mouse_callbacks={"Button1": lazy.spawn("./.config/qtile/helper/reboot.sh")},
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
        ),
        PopupImage(
            filename="~/dotfiles/.config/qtile/images/sleep.png",
            pos_x=0.12,
            pos_y=0.33,
            width=0.8,
            height=0.3,
            mouse_callbacks={"Button1": lazy.spawn("./.config/qtile/helper/sleep.sh")},
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
        ),
        PopupImage(
            filename="~/dotfiles/.config/qtile/images/standby.png",
            pos_x=0.12,
            pos_y=0.66,
            width=0.8,
            height=0.3,
            mouse_callbacks={"Button1": lazy.spawn("./.config/qtile/helper/shut_down.sh")},
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
        ),
        ],
    )
    layout.show(relative_to=3, relative_to_bar=True, y=5, x=-11, hide_on_timeout=3)
    
    
def start_menu(qtile):
    layout = PopupGridLayout(
        qtile,
        rows=7,
        cols=9,
        width=610,
        height=448,   
        opacity=0.7,
        hide_on_mouse_leave=True,
        close_on_click=False,
        border=wp_colors[3],
        border_width=3,
        background=wp_colors[0],
        controls=[
            PopupWidget(
                row=0,
                col=2,
                col_span=8,
                widget=widget.Clock(
                    font='Arial Bold',
                    fontsize=36,
                    format='%d.%m.%y - %H:%M'
                )
            ),
            PopupImage(
            filename="~/dotfiles/.config/qtile/images/terminal_3.png",
            row=1,
            col=0,
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
            ),
            PopupText(
                row=1,
                col=1,
                col_span=2,  
                text="Alacritty",
                font='Arial',
                fontsize=22,
            ),
            PopupImage(
            filename="~/dotfiles/.config/qtile/images/firefox_3.png",
            row=2,
            col=0,
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
            ),
            PopupText(
                row=2,
                col=1,
                col_span=2,  
                text="Firefox",
                font='Arial',
                fontsize=22,
            ),
            PopupImage(
            filename="~/dotfiles/.config/qtile/images/jellyfin.png",
            row=3,
            col=0,
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
            ),
            PopupText(
                row=3,
                col=1,
                col_span=2,  
                text="Jellyfin",
                font='Arial',
                fontsize=22,
            ),
            PopupImage(
            filename="~/dotfiles/.config/qtile/images/folder.png",
            row=4,
            col=0,
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
            ),
            PopupText(
                row=4,
                col=1,
                col_span=2,  
                text="Nemo",
                font='Arial',
                fontsize=22,
            ),
            PopupImage(
            filename="~/dotfiles/.config/qtile/images/vs_code.png",
            row=5,
            col=0,
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
            ),
            PopupText(
                row=5,
                col=1,
                col_span=3,  
                text="Visual Studio Code",
                font='Arial',
                fontsize=22,
            ),
            PopupImage(
            filename="~/dotfiles/.config/qtile/images/discord.png",
            row=6,
            col=0,
            mask=True,
            colour=wp_colors[4],
            highlight_method='mask',
            highlight=wp_colors[7],
            ),
            PopupText(
                row=6,
                col=1,
                col_span=2,  
                text="Discord",
                font='Arial',
                fontsize=22,
            ),
    ]
    )
    layout.show(relative_to=1, 
                relative_to_bar=True, 
                y=5, 
                x=5, 
                )
    
VOLUME_NOTIFICATION = PopupRelativeLayout(
    width=300,
    height=85,
    opacity=0.7,
    border=wp_colors[3],
    border_width=3,
    background=wp_colors[0],
    controls=[
        PopupText(
            text="Volume:",
            font='Arial',
            fontsize=18,
            name="text",
            pos_x=0.1,
            pos_y=0.13,
            height=0.2,
            width=0.8,
            v_align="middle",
            h_align="center",
        ),
        PopupSlider(
            name="volume",
            pos_x=0.1,
            pos_y=0.33,
            width=0.8,
            height=0.8,
            colour_below=wp_colors[1],
            bar_border_size=2,
            bar_border_margin=1,
            bar_size=9,
            marker_size=0,
            marker_colour=wp_colors[2],
            end_margin=0,
        ),
    ],
)

MPRIS_LAYOUT = PopupRelativeLayout(
    None,
    width=400,
    height=200,
    controls=[
        PopupText(
            "",
            name="title",
            pos_x=0.35,
            pos_y=0.1,
            width=0.55,
            height=0.14,
            h_align="left",
            v_align="top",
        ),
        PopupText(
            "",
            name="artist",
            pos_x=0.35,
            pos_y=0.24,
            width=0.55,
            height=0.14,
            h_align="left",
            v_align="middle",
        ),
        PopupText(
            "",
            name="album",
            pos_x=0.35,
            pos_y=0.38,
            width=0.55,
            height=0.14,
            h_align="left",
            v_align="bottom",
        ),
        PopupImage(
            name="artwork",
            # filename=DEFAULT_IMAGE,
            pos_x=0.1,
            pos_y=0.1,
            width=0.21,
            height=0.42,
        ),
        PopupSlider(name="progress", pos_x=0.1, pos_y=0.6, width=0.8, height=0.1, marker_size=0),
        PopupImage(
            name="previous",
            # filename=(IMAGES_FOLDER / "previous.svg").resolve().as_posix(),
            mask=True,
            pos_x=0.125,
            pos_y=0.8,
            width=0.15,
            height=0.1,
        ),
        PopupImage(
            name="play_pause",
            # filename=(IMAGES_FOLDER / "play_pause.svg").resolve().as_posix(),
            mask=True,
            pos_x=0.325,
            pos_y=0.8,
            width=0.15,
            height=0.1,
        ),
        PopupImage(
            name="stop",
            # filename=(IMAGES_FOLDER / "stop.svg").resolve().as_posix(),
            mask=True,
            pos_x=0.525,
            pos_y=0.8,
            width=0.15,
            height=0.1,
        ),
        PopupImage(
            name="next",
            # filename=(IMAGES_FOLDER / "next.svg").resolve().as_posix(),
            mask=True,
            pos_x=0.725,
            pos_y=0.8,
            width=0.15,
            height=0.1,
        ),
    ],
    close_on_click=False,
)